var me=Object.defineProperty,he=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var ne=(e,n,a)=>n in e?me(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,$=(e,n)=>{for(var a in n||(n={}))be.call(n,a)&&ne(e,a,n[a]);if(te)for(var a of te(n))ve.call(n,a)&&ne(e,a,n[a]);return e},W=(e,n)=>he(e,ye(n));var U=(e,n,a)=>new Promise((u,l)=>{var r=d=>{try{o(a.next(d))}catch(i){l(i)}},t=d=>{try{o(a.throw(d))}catch(i){l(i)}},o=d=>d.done?u(d.value):Promise.resolve(d.value).then(r,t);o((a=a.apply(e,n)).next())});import{c as Q,Q as G,k as s,bf as Ce,a as O,bi as Me,co as ke,n as C,dd as $e,cp as Se,de as He,bn as Fe,bL as we,w as b,df as Be,f as S,x as ue,a0 as Oe,aZ as de,a1 as D,R as T,S as m,bY as _e,o as h,j as M,H as g,E as De,h as Y,V as B,bs as Te,bq as Pe,b5 as Ne,b as K,M as Re,l as j,q as I,J,t as X,Y as L,cX as We,bK as Ee,aI as Z,aQ as Ie,T as oe,U as le,W as ae,X as se,aS as pe,cY as Le,D as fe,cs as je,aG as q,aJ as Ve,cZ as Ae,Z as Ue,cF as qe,bd as re,by as ze,O as Ye,C as Xe,i as z,bB as Ze}from"./index.c2fb29d9.js";import{D as Je}from"./siteSetting.c485f07c.js";import{F as Qe,b as Ge,c as Ke,u as xe}from"./index.fed83de8.js";import{b as et}from"./useContentViewHeight.ede91aa8.js";import{h as tt}from"./header.d801b988.js";import"./index.a038765d.js";const{t:ie}=Q(),nt={visible:{type:Boolean},scrollTop:{type:Boolean,default:!0},height:{type:Number},minHeight:{type:Number},draggable:{type:Boolean,default:!0},centered:{type:Boolean},cancelText:{type:String,default:ie("common.cancelText")},okText:{type:String,default:ie("common.okText")},closeFunc:Function},x=Object.assign({},nt,{defaultFullscreen:{type:Boolean},canFullscreen:{type:Boolean,default:!0},wrapperFooterOffset:{type:Number,default:0},helpMessage:[String,Array],useWrapper:{type:Boolean,default:!0},loading:{type:Boolean},loadingTip:{type:String},showCancelBtn:{type:Boolean,default:!0},showOkBtn:{type:Boolean,default:!0},wrapperProps:Object,afterClose:Function,bodyStyle:Object,closable:{type:Boolean,default:!0},closeIcon:Object,confirmLoading:{type:Boolean},destroyOnClose:{type:Boolean},footer:Object,getContainer:Function,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},maskStyle:Object,okType:{type:String,default:"primary"},okButtonProps:Object,cancelButtonProps:Object,title:{type:String},visible:{type:Boolean},width:[String,Number],wrapClassName:{type:String},zIndex:{type:Number}});function ot(e){const n=(l,r)=>getComputedStyle(l)[r],a=l=>{if(!l)return;l.setAttribute("data-drag",s(e.draggable));const r=l.querySelector(".ant-modal-header"),t=l.querySelector(".ant-modal");!r||!t||!s(e.draggable)||(r.style.cursor="move",r.onmousedown=o=>{if(!o)return;const d=o.clientX,i=o.clientY,p=document.body.clientWidth,f=document.documentElement.clientHeight,y=t.offsetWidth,k=t.offsetHeight,H=t.offsetLeft,F=p-t.offsetLeft-y,w=t.offsetTop,V=f-t.offsetTop-k,_=n(t,"left"),P=n(t,"top");let N=+_,R=+P;_.includes("%")?(N=+document.body.clientWidth*(+_.replace(/%/g,"")/100),R=+document.body.clientHeight*(+P.replace(/%/g,"")/100)):(N=+_.replace(/px/g,""),R=+P.replace(/px/g,"")),document.onmousemove=function(A){let c=A.clientX-d,v=A.clientY-i;-c>H?c=-H:c>F&&(c=F),-v>w?v=-w:v>V&&(v=V),t.style.cssText+=`;left:${c+N}px;top:${v+R}px;`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})},u=()=>{const l=document.querySelectorAll(".ant-modal-wrap");for(const r of Array.from(l)){if(!r)continue;const t=n(r,"display"),o=r.getAttribute("data-drag");t!=="none"&&(o===null||s(e.destroyOnClose))&&a(r)}};G(()=>{!s(e.visible)||!s(e.draggable)||Ce(()=>{u()},30)})}function lt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Se(e)}var at=O({name:"Modal",inheritAttrs:!1,props:x,emits:["cancel"],setup(e,{slots:n,emit:a}){const{visible:u,draggable:l,destroyOnClose:r}=Me(e),t=ke();ot({visible:u,destroyOnClose:r,draggable:l});const o=d=>{a("cancel",d)};return()=>{let d;const i=W($($({},s(t)),e),{onCancel:o});return C(He,i,lt(d=$e(n))?d:{default:()=>[d]})}}});const st=Symbol();function rt(e){return Fe(e,st)}const it={loading:{type:Boolean},useWrapper:{type:Boolean,default:!0},modalHeaderHeight:{type:Number,default:57},modalFooterHeight:{type:Number,default:74},minHeight:{type:Number,default:200},height:{type:Number},footerOffset:{type:Number,default:0},visible:{type:Boolean},fullScreen:{type:Boolean},loadingTip:{type:String}},ct=O({name:"ModalWrapper",components:{ScrollContainer:we},inheritAttrs:!1,props:it,emits:["height-change","ext-height"],setup(e,{emit:n}){const a=b(null),u=b(null),l=b(0),r=b(0);let t=0;et(i.bind(null,!1)),Be(u,()=>{i()},{attributes:!0,subtree:!0}),rt({redoModalHeight:i});const o=S(()=>({minHeight:`${e.minHeight}px`,[e.fullScreen?"height":"maxHeight"]:`${s(l)}px`}));G(()=>{e.useWrapper&&i()}),ue(()=>e.fullScreen,p=>{i(),p?r.value=l.value:l.value=r.value}),Oe(()=>{const{modalHeaderHeight:p,modalFooterHeight:f}=e;n("ext-height",p+f)}),de(()=>{});function d(){return U(this,null,function*(){D(()=>{var f;const p=s(a);!p||(f=p==null?void 0:p.scrollTo)==null||f.call(p,0)})})}function i(){return U(this,null,function*(){if(!e.visible)return;const p=s(a);if(!p)return;const f=p.$el.parentElement;if(!!f){f.style.padding="0",yield D();try{const y=f.parentElement&&f.parentElement.parentElement;if(!y)return;const k=getComputedStyle(y).top,H=Number.parseInt(k);let F=window.innerHeight-H*2+(e.footerOffset||0)-e.modalFooterHeight-e.modalHeaderHeight;H<40&&(F-=26),yield D();const w=s(u);if(!w)return;yield D(),t=w.scrollHeight,e.fullScreen?l.value=window.innerHeight-e.modalFooterHeight-e.modalHeaderHeight-28:l.value=e.height?e.height:t>F?F:t,n("height-change",s(l))}catch(y){}}})}return{wrapperRef:a,spinRef:u,spinStyle:o,scrollTop:d,setModalHeight:i}}}),ut=["loading-tip"];function dt(e,n,a,u,l,r){const t=m("ScrollContainer"),o=_e("loading");return h(),M(t,{ref:"wrapperRef"},{default:g(()=>[De((h(),Y("div",{ref:"spinRef",style:Te(e.spinStyle),"loading-tip":e.loadingTip},[B(e.$slots,"default")],12,ut)),[[o,e.loading]])]),_:3},512)}var pt=T(ct,[["render",dt]]);const ft=O({name:"ModalClose",components:{Tooltip:Pe,FullscreenExitOutlined:Qe,FullscreenOutlined:Ge,CloseOutlined:Ne},props:{canFullscreen:{type:Boolean,default:!0},fullScreen:{type:Boolean}},emits:["cancel","fullscreen"],setup(e,{emit:n}){const{prefixCls:a}=K("basic-modal-close"),{t:u}=Q(),l=S(()=>[a,`${a}--custom`,{[`${a}--can-full`]:e.canFullscreen}]);function r(o){n("cancel",o)}function t(o){o==null||o.stopPropagation(),o==null||o.preventDefault(),n("fullscreen")}return{t:u,getClass:l,prefixCls:a,handleCancel:r,handleFullScreen:t}}});function gt(e,n,a,u,l,r){const t=m("FullscreenExitOutlined"),o=m("Tooltip"),d=m("FullscreenOutlined"),i=m("CloseOutlined");return h(),Y("div",{class:I(e.getClass)},[e.canFullscreen?(h(),Y(Re,{key:0},[e.fullScreen?(h(),M(o,{key:0,title:e.t("component.modal.restore"),placement:"bottom"},{default:g(()=>[C(t,{role:"full",onClick:e.handleFullScreen},null,8,["onClick"])]),_:1},8,["title"])):(h(),M(o,{key:1,title:e.t("component.modal.maximize"),placement:"bottom"},{default:g(()=>[C(d,{role:"close",onClick:e.handleFullScreen},null,8,["onClick"])]),_:1},8,["title"]))],64)):j("",!0),C(o,{title:e.t("component.modal.close"),placement:"bottom"},{default:g(()=>[C(i,{onClick:e.handleCancel},null,8,["onClick"])]),_:1},8,["title"])],2)}var mt=T(ft,[["render",gt]]);const ht=O({name:"BasicModalFooter",props:x,emits:["ok","cancel"],setup(e,{emit:n}){function a(l){n("ok",l)}function u(l){n("cancel",l)}return{handleOk:a,handleCancel:u}}});function yt(e,n,a,u,l,r){const t=m("a-button");return h(),Y("div",null,[B(e.$slots,"insertFooter"),e.showCancelBtn?(h(),M(t,L({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:g(()=>[J(X(e.cancelText),1)]),_:1},16,["onClick"])):j("",!0),B(e.$slots,"centerFooter"),e.showOkBtn?(h(),M(t,L({key:1,type:e.okType,onClick:e.handleOk,loading:e.confirmLoading},e.okButtonProps),{default:g(()=>[J(X(e.okText),1)]),_:1},16,["type","onClick","loading"])):j("",!0),B(e.$slots,"appendFooter")])}var bt=T(ht,[["render",yt]]);const vt=O({name:"BasicModalHeader",components:{BasicTitle:We},props:{helpMessage:{type:[String,Array]},title:{type:String}},emits:["dblclick"]});function Ct(e,n,a,u,l,r){const t=m("BasicTitle");return h(),M(t,{helpMessage:e.helpMessage},{default:g(()=>[J(X(e.title),1)]),_:1},8,["helpMessage"])}var Mt=T(vt,[["render",Ct]]);function kt(e){const n=b(!1),a=S(()=>{const l=s(e.wrapClassName)||"";return s(n)?`fullscreen-modal ${l} `:s(l)});function u(l){l&&l.stopPropagation(),n.value=!s(n)}return{getWrapClassName:a,handleFullScreen:u,fullScreenRef:n}}const $t=O({name:"BasicModal",components:{Modal:at,ModalWrapper:pt,ModalClose:mt,ModalFooter:bt,ModalHeader:Mt},inheritAttrs:!1,props:x,emits:["visible-change","height-change","cancel","ok","register","update:visible"],setup(e,{emit:n,attrs:a}){const u=b(!1),l=b(null),r=b(null),{prefixCls:t}=K("basic-modal"),o=b(0),d={setModalProps:_,emitVisible:void 0,redoModalHeight:()=>{D(()=>{s(r)&&s(r).setModalHeight()})}},i=pe();i&&n("register",d,i.uid);const p=S(()=>$($({},e),s(l))),{handleFullScreen:f,getWrapClassName:y,fullScreenRef:k}=kt({modalWrapperRef:r,extHeightRef:o,wrapClassName:Ee(p.value,"wrapClassName")}),H=S(()=>{const c=W($({},s(p)),{visible:s(u),okButtonProps:void 0,cancelButtonProps:void 0,title:void 0});return W($({},c),{wrapClassName:s(y)})}),F=S(()=>{const c=W($($({},a),s(p)),{visible:s(u),wrapClassName:s(y)});return s(k)?Z(c,["height","title"]):Z(c,"title")}),w=S(()=>{if(!s(k))return s(H).height});G(()=>{u.value=!!e.visible,k.value=!!e.defaultFullscreen}),ue(()=>s(u),c=>{var v;n("visible-change",c),n("update:visible",c),i&&((v=d.emitVisible)==null||v.call(d,c,i.uid)),D(()=>{e.scrollTop&&c&&s(r)&&s(r).scrollTop()})},{immediate:!1});function V(c){return U(this,null,function*(){var v,ee;if(c==null||c.stopPropagation(),!((ee=(v=c.target)==null?void 0:v.classList)!=null&&ee.contains(t+"-close--custom"))){if(e.closeFunc&&Ie(e.closeFunc)){const ge=yield e.closeFunc();u.value=!ge;return}u.value=!1,n("cancel",c)}})}function _(c){l.value=Le(s(l)||{},c),Reflect.has(c,"visible")&&(u.value=!!c.visible),Reflect.has(c,"defaultFullscreen")&&(k.value=!!c.defaultFullscreen)}function P(c){n("ok",c)}function N(c){n("height-change",c)}function R(c){o.value=c}function A(c){!e.canFullscreen||(c.stopPropagation(),f(c))}return{handleCancel:V,getBindValue:F,getProps:H,handleFullScreen:f,fullScreenRef:k,getMergeProps:p,handleOk:P,visibleRef:u,omit:Z,modalWrapperRef:r,handleExtHeight:R,handleHeightChange:N,handleTitleDbClick:A,getWrapperHeight:w}}});function St(e,n,a,u,l,r){const t=m("ModalClose"),o=m("ModalHeader"),d=m("ModalFooter"),i=m("ModalWrapper"),p=m("Modal");return h(),M(p,L(e.getBindValue,{onCancel:e.handleCancel}),oe({default:g(()=>[C(i,L({useWrapper:e.getProps.useWrapper,footerOffset:e.wrapperFooterOffset,fullScreen:e.fullScreenRef,ref:"modalWrapperRef",loading:e.getProps.loading,"loading-tip":e.getProps.loadingTip,minHeight:e.getProps.minHeight,height:e.getWrapperHeight,visible:e.visibleRef,modalFooterHeight:e.footer!==void 0&&!e.footer?0:void 0},e.omit(e.getProps.wrapperProps,"visible","height","modalFooterHeight"),{onExtHeight:e.handleExtHeight,onHeightChange:e.handleHeightChange}),{default:g(()=>[B(e.$slots,"default")]),_:3},16,["useWrapper","footerOffset","fullScreen","loading","loading-tip","minHeight","height","visible","modalFooterHeight","onExtHeight","onHeightChange"])]),_:2},[e.$slots.closeIcon?void 0:{name:"closeIcon",fn:g(()=>[C(t,{canFullscreen:e.getProps.canFullscreen,fullScreen:e.fullScreenRef,onCancel:e.handleCancel,onFullscreen:e.handleFullScreen},null,8,["canFullscreen","fullScreen","onCancel","onFullscreen"])])},e.$slots.title?void 0:{name:"title",fn:g(()=>[C(o,{helpMessage:e.getProps.helpMessage,title:e.getMergeProps.title,onDblclick:e.handleTitleDbClick},null,8,["helpMessage","title","onDblclick"])])},e.$slots.footer?void 0:{name:"footer",fn:g(()=>[C(d,L(e.getBindValue,{onOk:e.handleOk,onCancel:e.handleCancel}),oe({_:2},[le(Object.keys(e.$slots),f=>({name:f,fn:g(y=>[B(e.$slots,f,ae(se(y||{})))])}))]),1040,["onOk","onCancel"])])},le(Object.keys(e.omit(e.$slots,"default")),f=>({name:f,fn:g(y=>[B(e.$slots,f,ae(se(y||{})))])}))]),1040,["onCancel"])}var Ht=T($t,[["render",St]]);const E=fe({}),ce=fe({});function Ft(){const e=b(null),n=b(!1),a=b("");function u(t,o){if(!pe())throw new Error("useModal() can only be used inside setup() or functional components!");a.value=o,de(()=>{e.value=null,n.value=!1,E[s(a)]=null}),!(s(n)&&je()&&t===s(e))&&(e.value=t,n.value=!0,t.emitVisible=(d,i)=>{ce[i]=d})}const l=()=>{const t=s(e);return t||Ae("useModal instance is undefined!"),t},r={setModalProps:t=>{var o;(o=l())==null||o.setModalProps(t)},getVisible:S(()=>ce[~~s(a)]),redoModalHeight:()=>{var t,o;(o=(t=l())==null?void 0:t.redoModalHeight)==null||o.call(t)},openModal:(t=!0,o,d=!0)=>{var f;if((f=l())==null||f.setModalProps({visible:t}),!o)return;const i=s(a);if(d){E[i]=null,E[i]=q(o);return}Ve(q(E[i]),q(o))||(E[i]=q(o))},closeModal:()=>{var t;(t=l())==null||t.setModalProps({visible:!1})}};return[u,r]}Ue(Ht);const wt=O({name:"UserDropdown",components:{Dropdown:qe,Menu:re,MenuItem:Ke(()=>ze(()=>import("./DropMenuItem.a4516f18.js"),["assets/DropMenuItem.a4516f18.js","assets/index.c2fb29d9.js","assets/index.5af11f99.css"])),MenuDivider:re.Divider},props:{theme:Ye.oneOf(["dark","light"])},setup(){const{prefixCls:e}=K("header-user-dropdown"),{t:n}=Q(),{getShowDoc:a}=xe(),u=Xe(),l=S(()=>{const{realName:i="",avatar:p,desc:f}=u.getUserInfo||{};return{realName:i,avatar:p||tt,desc:f}}),[r]=Ft();function t(){u.confirmLoginOut()}function o(){Ze(Je)}function d(i){switch(i.key){case"logout":t();break;case"doc":o();break}}return{prefixCls:e,t:n,getUserInfo:l,handleMenuClick:d,getShowDoc:a,register:r}}}),Bt=["src"];function Ot(e,n,a,u,l,r){const t=m("MenuItem"),o=m("MenuDivider"),d=m("Menu"),i=m("Dropdown");return h(),M(i,{placement:"bottomLeft",overlayClassName:`${e.prefixCls}-dropdown-overlay`},{overlay:g(()=>[C(d,{onClick:e.handleMenuClick},{default:g(()=>[e.getShowDoc?(h(),M(t,{key:"doc",text:e.t("layout.header.dropdownItemDoc"),icon:"ion:document-text-outline"},null,8,["text"])):j("",!0),e.getShowDoc?(h(),M(o,{key:1})):j("",!0),C(t,{key:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"ion:power-outline"},null,8,["text"])]),_:1},8,["onClick"])]),default:g(()=>[z("span",{class:I([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[z("img",{class:I(`${e.prefixCls}__header`),src:e.getUserInfo.avatar},null,10,Bt),z("span",{class:I(`${e.prefixCls}__info hidden md:block`)},[z("span",{class:I([`${e.prefixCls}__name  `,"truncate"])},X(e.getUserInfo.realName),3)],2)],2)]),_:1},8,["overlayClassName"])}var Et=T(wt,[["render",Ot]]);export{Et as default};
